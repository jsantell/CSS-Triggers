<!--

Copyright 2014 Google Inc. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

-->

<!doctype html>
<html itemscope itemtype="http://schema.org/Reference">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width">

  <meta itemprop="name" content="CSS Triggers">
  <meta itemprop="description" content="Such properties. Many layout.">
  <meta itemprop="image" content="http://csstriggers.com/css-triggers.gif">

  <title>CSS Triggers...</title>
  <link rel="stylesheet" href="css/triggers.css">
  <style>

    @font-face {
      font-family: 'Lato';
      font-style: normal;
      font-weight: 300;
      src: local('Lato Light'), local('Lato-Light'), url(http://themes.googleusercontent.com/static/fonts/lato/v7/kcf5uOXucLcbFOydGU24WALUuEpTyoUstqEm5AMlJo4.woff) format('woff');
    }
    @font-face {
      font-family: 'Lato';
      font-style: normal;
      font-weight: 700;
      src: local('Lato Bold'), local('Lato-Bold'), url(http://themes.googleusercontent.com/static/fonts/lato/v7/qdgUG4U09HnJwhYI-uK18wLUuEpTyoUstqEm5AMlJo4.woff) format('woff');
    }

  </style>

</head>

<!--

 _______  _______  _______
(  ____ \(  ____ \(  ____ \
| (    \/| (    \/| (    \/
| |      | (_____ | (_____
| |      (_____  )(_____  )
| |            ) |      ) |
| (____/\/\____) |/\____) |
(_______/\_______)\_______)

_________ _______ _________ _______  _______  _______  _______  _______
\__   __/(  ____ )\__   __/(  ____ \(  ____ \(  ____ \(  ____ )(  ____ \
   ) (   | (    )|   ) (   | (    \/| (    \/| (    \/| (    )|| (    \/
   | |   | (____)|   | |   | |      | |      | (__    | (____)|| (_____
   | |   |     __)   | |   | | ____ | | ____ |  __)   |     __)(_____  )
   | |   | (\ (      | |   | | \_  )| | \_  )| (      | (\ (         ) |
   | |   | ) \ \_____) (___| (___) || (___) || (____/\| ) \ \__/\____) |
   )_(   |/   \__/\_______/(_______)(_______)(_______/|/   \__/\_______)


Just remember that, when all else fails, I <3 what you do, web devs.
You may have crawled through bugs, badly thought-out projects, weird, esoteric
and hacky JavaScript that younger you vowed never to write (but look at you
now... hey I'm not judging, I have my fair share! ¯\_(ツ)_/¯), but here you are.

You're *here*, looking in the source code, seeing what's what in the page.
It's in your inquisitive nature that I see your genius, your will to succeed,
to grow, and to win.

I salute you.

Paul
@aerotwist

PS This ickle project of mine is rad, amirite?!
-->

<body>

  <header class="header">
    <div class="toggle-legend-container">
      <button class="toggle-legend">See Legend</button>
    </div>
    <h1 class="main-title">CSS Triggers...</h1>
    <h2 class="sub-title">A game of layout, paint, and composite.</h2>

    <aside class="blog-post">
      <a href="http://aerotwist.com/blog/css-triggers/">Read the blog post!</a>
    </aside>
  </header>

  <div class="filter-container">
    <form class="filter-form">
      <label class="filter-label" for="filter">Filter:</label>
      <input autocorrect="off" autocapitalize="off" id="filter" class="filter" name="filter" type="text" autofocus="true">
      <button type="reset" class="reset"></button>
    </form>

    <aside class="legend">

      <h1 class="legend-title">Legend</h1>

      <button class="close-button"></button>

      <div class="legend-item">
        <span class='dot layout true'></span> Layout
      </div>

      <div class="legend-item">
        <span class='dot paint true'></span> Paint
      </div>

      <div class="legend-item">
        <span class='dot composite true'></span> Composite
      </div>

      <div class="legend-item">
        <span class='dot null'></span> Not applicable
      </div>

      <div class="legend-item">
        <span class='dot'></span> Does not trigger
      </div>
    </aside>
  </div>

  <div class="property-container">

    <div class="property-list">


    </div>

    <div class="no-results-message">
      There are no properties containing "<span class='filter-text'></span>"
    </div>

    <section class="property-description-container">
      <button class="close-button"></button>
      <h1 class="property-description-title">Select a property</h1>
      <div class="property-description-text">
        <p>Choose a property from the list to get more details.</p>
      </div>
    </section>

  </div>

  <aside class="property-definition-container">

    <h1 class="property-definition-title">Definitions</h1>

    <dl class="property-definition">
      <dt>Change from default</dt>
      <dd>Setting the value to something <em>other</em> than the default user agent style, e.g. setting opacity to something other than 1.</dd>
      <dt>Update value</dt>
      <dd>Setting the value from any <em>non-default</em> value to another.</dd>
    </dl>
  </aside>

  <footer class="footer">
    <p>
      Crafted with a lot of <code>&lt;3</code> by <a href="https://twitter.com/aerotwist">Paul Lewis</a>. Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0.</a>
    </p>
  </footer>

  <div class="hidden" id="property-template">
    <section class="property" data-name="{{ props.name }}" data-initial="{{ props.initial.layout }},{{ props.initial.paint }},{{ props.initial.composite }}" data-change="{{ props.change.layout }},{{ props.change.paint }},{{ props.change.composite }}">
        <h1 class="property-name">{{ props.name }}</h1>
        <div class="property-initial">
          <span class="dot layout {{ props.initial.layout }}"></span>
          <span class="dot paint {{ props.initial.paint }}"></span>
          <span class="dot composite {{ props.initial.composite }}"></span>
        </div>

        <div class="property-change {{ props.shouldhide }} ">
          <span class="dot layout {{ props.change.layout }}"></span>
          <span class="dot paint {{ props.change.paint }}"></span>
          <span class="dot composite {{ props.change.composite }}"></span>
        </div>
      </section>
  </div>

  <script> var module = {}; </script>
  <script src="../gecko.js"></script>
  <script>

    var mungedData = {};
    var data = module.exports.data;
    var keys = Object.keys(data);

    for (var k = 0; k < keys.length; k++) {

      var property = keys[k];
      var value = data[keys[k]];
      var initial = /\-initial$/;
      var change = /\-change$/;
      var isInitial = initial.test(property);
      var isChange = change.test(property);

      property = property.replace(initial, '');
      property = property.replace(change, '');

      if (!mungedData[property]) {
        mungedData[property] = {
          "initial": {
            "layout": null, "paint": null, "composite": null
          },
          "change": {
            "layout": null, "paint": null, "composite": null
          }
        };
      }

      if (isInitial) {
        mungedData[property].initial = value;
      } else if (isChange) {
        mungedData[property].change = value;
      }

    }

    var mKeys = Object.keys(mungedData);
    var ymlString = '';

    var htmlString = ''
    var htmlTemplate = document.getElementById('property-template').innerHTML;

    for (var m = 0; m < mKeys.length; m++) {
      var mProperty = mKeys[m];
      var mValue = mungedData[mProperty];
      var shouldHide = (mValue.change.layout === null &&
          mValue.change.paint === null &&
          mValue.change.composite === null ? 'hidden' : '');

      var htmlForProperty = htmlTemplate.replace(/\{\{ props.name \}\}/gi, mProperty);

      htmlForProperty = htmlForProperty.replace(/\{\{ props.initial.layout \}\}/gi, mValue.initial.layout);
      htmlForProperty = htmlForProperty.replace(/\{\{ props.initial.paint \}\}/gi, mValue.initial.paint);
      htmlForProperty = htmlForProperty.replace(/\{\{ props.initial.composite \}\}/gi, mValue.initial.composite);
      htmlForProperty = htmlForProperty.replace(/\{\{ props.change.layout \}\}/gi, mValue.change.layout);
      htmlForProperty = htmlForProperty.replace(/\{\{ props.change.paint \}\}/gi, mValue.change.paint);
      htmlForProperty = htmlForProperty.replace(/\{\{ props.change.composite \}\}/gi, mValue.change.composite);
      htmlForProperty = htmlForProperty.replace(/\{\{ props.shouldhide \}\}/gi, shouldHide);


      htmlString += htmlForProperty;
    }

    document.querySelector('.property-list').innerHTML = htmlString;
  </script>

  <script src="scripts/triggers.js"></script>
</body>
</html>

